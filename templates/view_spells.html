{% extends 'base.html'%} {% block content %}
{% if error %}
<br>
    <div class="col s6">
        <p class="alert-message"><strong>Error:</strong> {{ error }} 
    </div>
    {% endif %}
    
<div class="row search-buttons">
    <div class="col s12">
        <p class="spell-name center-text">Use the buttons below to order spells via selected attribute<br>Or keep scrolling to view all spells!</p>
    </div>
    <div class="col s12 m3">
        <form action="{{ url_for('search_levels') }}" method="POST">
            <button class="waves-effect waves-light btn-large nav-color" type="submit" name="level" id="level">Level
                <i class="material-icons right">arrow_forward_ios</i>
            </button>
        </form>
        <hr class="spell-break hide-on-med-and-up">
    </div>
    <div class="col s12 m3">
        <form action="" method="POST">
            <button class="waves-effect waves-light btn-large nav-color" type="submit" name="school" id="school">School
                <i class="material-icons right">arrow_forward_ios</i>
            </button>
        </form>
        <hr class="spell-break hide-on-med-and-up">
    </div>
    <div class="col s12 m3">
        <form action="" method="POST">
            <button class="waves-effect waves-light btn-large nav-color" type="submit" name="action">Casting Time
                <i class="material-icons right">arrow_forward_ios</i>
            </button>
        </form>
        <hr class="spell-break hide-on-med-and-up">
    </div>
    <div class="col s12 m3">
        <form action="" method="POST">
            <button class="waves-effect waves-light btn-large nav-color" type="submit" name="action">Components
                <i class="material-icons right">arrow_forward_ios</i>
            </button>
        </form>
    </div>
</div>
<div class="row">
    
    {% for spell in spells %}
    <div class="col s12 l6 xl4">
        <div class="card-panel spell-box hoverable responsive-img">
            <div class="top-spell-box">
                <div class="spell-name">{{spell.spell_name}}</div>
                {% if spell.spell_level == "0" %}
                <div class="underline">{{spell.school}} cantrip</div>
                {% else %}
                <div class="underline">Level {{spell.spell_level}} {{spell.school}}</div>
                {% endif %}
            </div>
            <div class="middle-spell-box">
                <div>
                    <span class="bold-text">Casting Time:</span> <span class="value-text"> {{spell.casting_time}} </span>
                </div>
                <div>
                    <span class="bold-text">Range:</span> <span class="value-text"> {{spell.range}} </span>
                </div>
                <div>
                    <span class="bold-text">Components:</span><span class="value-text"> {% for component in spell.components %} {{component}} {% endfor %} </span>
                </div>
                <div>
                    <span class="bold-text">Duration:</span><span class="value-text"> {{spell.duration}} </span>
                </div>
                {% if spell.die_value == "0" %}
                <div>
                    <span class="bold-text">Die:</span><span class="value-text"> N/A </span>
                </div>
                {% else %}
                <div>
                    <span class="bold-text">Die:</span><span class="value-text"> {{spell.die_amount}}d{{spell.die_value}} </span>
                </div>
                {% endif %}
            </div>
        </div>
        <div class="button-helper center-align">
            <a href="{{url_for('edit_spell', spell_id=spell._id)}}" class="btn-floating btn-large waves-effect waves-light blue"><i class="material-icons">edit</i></a>
            <a data-target="modal1" class="btn-floating btn-large waves-effect waves-light modal-trigger red"><i class="material-icons">delete_forever</i></a>
        </div>
    </div>
    <div id="modal1" class="modal bottom-sheet nav-color value-text">
        <div class="modal-content center-align">
            <h4 class="spell-name">Are you sure you want to delete this spell?</h4>
            <p class="modal-body">This will remove the spell permanently</p>
            <a href="{{url_for('delete_spell', spell_id=spell._id)}}" class="btn-floating waves-effect waves-light btn-large modal-close red"><i class="material-icons">delete_forever</i></a>
        </div>
    </div>
    {% endfor %}
</div>



<br> {% endblock %}
<!-- <div class="">
                Description: {{spell.description}}
            </div> -->
